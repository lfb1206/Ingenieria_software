<% if @tipo_index.to_i == 1 %>

    <h1 align='center' class = "title is-2 has-text-primary" >Turnos</h1>
    <h1 align='center' class = "title is-4 has-text-black" >Aquí se encuentra toda la información de los turnos ajenos</h1>

    <div class="column">
        <div align='left' style="display: flex; flex-flow: wrap; ">
            <h3 class = "title is-4 has-text-dark" >Filtros</h3>
        </div>
    </div>
    <%= form_for(@turno, as: :turno, url:turnos_index_path, :html => { :method => 'GET' }) do |form| %>
        <%= form.hidden_field :tipo, value: 1 %>
        <div>
            <%= form.text_field :conductor, class: "input is-primary is-rounded is-outlined", placeholder:"Nombre Conductor", 
            value: params[:conductor] %>
        </div>
        <% def options_for_status
            [
            ['Día de la semana',nil],
            ['Lunes','Lunes'],
            ['Martes','Martes'],
            ['Miércoles','Miércoles'],
            ['Jueves','Jueves'],
            ['Viernes','Viernes'],
            ['Sábado','Sábado'],
            ['Domingo','Domingo']
            ]
        end %>
        <div>
            <%= form.select :dia_semana, options_for_status, {}, prompt: 'Día', 
            value: params[:dia_semana] %>
        </div>
        <% def options_for_status
            [
            ['Tipo',nil],
            ['Ida','Ida'],
            ['Vuelta','Vuelta']
            ]
        end %>
        <div>
            <%= form.select :tipo_turno, options_for_status, {}, prompt: 'Select One', 
            value: params[:tipo_turno] %>
        </div>
        <div>
            <%= form.submit 'Filtrar', class: "button is-primary is-rounded is-outlined is-right" %>
        </div>
    <% end %>
    <br>

    <div class="row">

        <div class="column">
            <div align='left' style="display: flex; flex-flow: wrap; ">
                <h3 class = "title is-4 has-text-dark" >Turnos Activos</h3>
            </div>
        </div>

        <div class="row">
            <div class="row_inner">
                <div class="tile">
                    <% @turnos.each do |turno|%>
                        <%if turno.user_id != current_user.id and turno.estado == "ACTIVO"%>
                            <div align='center' style="display: flex; flex-flow: wrap; ">
                                <div class="column-turno">
                                    <b>Conductor </b><p><%= @users.find(turno.user_id).name%></p>
                                    <b>Hora salida </b><p><%= turno.hora_salida%></p>
                                    <b>Día de la semana </b><p><%= turno.dia_semana%></p>
                                    <b>Dirección salida </b><p><%= turno.direccion_salida%></p>
                                    <b>Dirección llegada </b><p><%= turno.direccion_llegada%></p>
                                    <b></b><p><%= link_to 'Ver detalles', turnos_show_path(:id => turno.id) %></p>
                                </div>
                            </div>
                        <% end %>
                    <% end %>
                </div>
            </div>
        </div>
        

        <div class="column">
            <div align='center' style="display: flex; flex-flow: wrap; ">
                <h3 class = "title is-4 has-text-dark" >Turnos Solicitados Confirmados</h3>
            </div>
        </div>
        <div class="row">
            <div class="row_inner">
                <div class="tile">
                    <% @requests.each do |request|%>
                        <%if request.user_id == current_user.id %>
                            <% @turno = Turno.find(request.turno.id)%> 
                            <%if @turno.estado == "CONFIRMADO"%>
                                <div align='center' style="display: flex; flex-flow: wrap; ">
                                    <div class="column-turno">
                                        <% @user = User.find(@turno.user_id)%>
                                        <b>Conductor </b><p><%= @users.find(@turno.user_id).name%></p>
                                        <b>Hora salida </b><p><%= @turno.hora_salida%></p>
                                        <b>Día de la semana </b><p><%= @turno.dia_semana%></p>
                                        <b>Dirección salida </b><p><%= @turno.direccion_salida%></p>
                                        <b>Dirección llegada </b><p><%= @turno.direccion_llegada%></p>
                                        <b></b><p><%= link_to 'Ver detalles', turnos_show_path(:id => @turno.id) %></p>
                                    </div>
                                </div>
                            <% end %>
                        <% end %>
                    <% end %>
                </div>
            </div>
        </div>

        <div class="column">
            <div align='center' style="display: flex; flex-flow: wrap; ">
                <h3 class = "title is-4 has-text-dark" >Turnos Solicitados Completados</h3>
            </div>
            <br/>
        </div>
        <div class="row">
            <div class="row_inner">
                <div class="tile">
                    <% @requests.each do |request|%>
                        <%if request.user_id == current_user.id %>
                            <% @turno = Turno.find(request.turno.id)%> 
                            <%if @turno.estado == "COMPLETADO"%>
                                <div align='center' style="display: flex; flex-flow: wrap; ">
                                    <div class="column-turno">
                                        <b>Conductor </b><p><%= @users.find(@turno.user_id).name%></p>
                                        <b>Hora salida </b><p><%= @turno.hora_salida%></p>
                                        <b>Día de la semana </b><p><%= @turno.dia_semana%></p>
                                        <b>Dirección salida </b><p><%= @turno.direccion_salida%></p>
                                        <b>Dirección llegada </b><p><%= @turno.direccion_llegada%></p>
                                        <b></b><p><%= link_to 'Ver detalles', turnos_show_path(:id => @turno.id) %></p>
                                    </div>
                                </div>
                            <% end %>
                        <% end %>
                    <% end %>
                </div>
            </div>
        </div>
    </div>

<% else %>

    <h1 align='center' class = "title is-2 has-text-primary" >Turnos</h1>
    <h1 align='center' class = "title is-4 has-text-black" >Aquí se encuentra toda la información de tus turnos </h1>

    <div align='center'>    
        <a>
            <%= button_to "Nuevo turno", turnos_path,:id => "boton_turnos", :class => "button is-primary is-rounded is-outlined is-right", :method => :get %>
        </a>
    </div>

    <br>

    <div class="row">
        
        <div class="column-cuenta">
            <div align='left' style="display: flex; flex-flow: wrap; ">
                <h3 class = "title is-4 has-text-dark" >Turnos Publicados Activos</h3>
            </div>
        </div>

        
        <div class="row">
            <div class="row_inner">
                <div class="tile">
                    <% @turnos.each do |turno|%>
                        <%if turno.user_id == current_user.id and turno.estado == "ACTIVO"%>
                            <div align='center' style="display: flex; flex-flow: wrap; ">
                                <div class="column-turno">
                                    <b>Conductor </b><p><%= @users.find(turno.user_id).name%></p>
                                    <b>Hora salida </b><p><%= turno.hora_salida%></p>
                                    <b>Día de la semana </b><p><%= turno.dia_semana%></p>
                                    <b>Dirección salida </b><p><%= turno.direccion_salida%></p>
                                    <b>Dirección llegada </b><p><%= turno.direccion_llegada%></p>
                                    <b></b><p><%= link_to 'Ver detalles', turnos_show_path(:id => turno.id) %></p>
                                </div>
                            </div>
                        <% end %>
                    <% end %>
                </div>
            </div>
        </div>

        <div class="column-cuenta">
            <div align='center' style="display: flex; flex-flow: wrap; ">
                <h3 class = "title is-4 has-text-dark" >Turnos Publicados Confirmados</h3>
            </div>
        </div>

        <div class="row">
            <div class="row_inner">
                <div class="tile">
                    <% @turnos.each do |turno|%>
                        <%if turno.user_id == current_user.id and turno.estado == "CONFIRMADO"%>
                            <div align='center' style="display: flex; flex-flow: wrap; ">
                                <div class="column-turno">
                                    <b>Conductor </b><p><%= @users.find(turno.user_id).name%></p>
                                    <b>Hora salida </b><p><%= turno.hora_salida%></p>
                                    <b>Día de la semana </b><p><%= turno.dia_semana%></p>
                                    <b>Dirección salida </b><p><%= turno.direccion_salida%></p>
                                    <b>Dirección llegada </b><p><%= turno.direccion_llegada%></p>
                                    <b></b><p><%= link_to 'Ver detalles', turnos_show_path(:id => turno.id) %></p>
                                </div>
                            </div>
                        <% end %>
                    <% end %>
                </div>
            </div>
        </div>

        <div class="column-cuenta">
            <div align='center' style="display: flex; flex-flow: wrap; ">
                <h3 class = "title is-4 has-text-dark" >Turnos Publicados Completados</h3>
            </div>
        </div>
        
        <div class="row">
            <div class="row_inner">
                <div class="tile">
                    <% @turnos.each do |turno|%>
                        <%if turno.user_id == current_user.id and turno.estado == "COMPLETADO"%>
                            <div align='center' style="display: flex; flex-flow: wrap; ">
                                <div class="column-turno">
                                    <b>Conductor </b><p><%= @users.find(turno.user_id).name%></p>
                                    <b>Hora salida </b><p><%= turno.hora_salida%></p>
                                    <b>Día de la semana </b><p><%= turno.dia_semana%></p>
                                    <b>Dirección salida </b><p><%= turno.direccion_salida%></p>
                                    <b>Dirección llegada </b><p><%= turno.direccion_llegada%></p>
                                    <b></b><p><%= link_to 'Ver detalles', turnos_show_path(:id => turno.id) %></p>
                                </div>
                            </div>   
                        <% end %>
                    <% end %>
                </div>
            </div>
        </div>
    </div>
<% end %>

